<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_cb_design_topic">
    <sys_cb_design_topic action="INSERT_OR_UPDATE">
        <compiled_topic display_value="HR Service Access">f187ee4adb654010b753a0a115961970</compiled_topic>
        <design_definition>{"type":"FlowTopic","triggers":[{"type":"Trigger","name":"04ecaa66c81c4f3b865e161cf8109909","triggerType":"request","applicability":{"type":"Applicability","mode":"script","value":"true"},"id":"04ecaa66c81c4f3b865e161cf8109909"}],"goals":[{"name":"primary","trigger_id":"04ecaa66c81c4f3b865e161cf8109909","nodes":[{"type":"StartGoal","goal_id":"8286536658544590a4b2a1aa417fcace","greeting_msg":{"type":"String","mode":"string","value":""},"id":"b0259fa8291b4dbfbe404cc9a0197eb1","name":"Start"},{"type":"TerminateGoal","goal_id":"8286536658544590a4b2a1aa417fcace","confirmation_msg":{"type":"String","mode":"string","value":""},"id":"d4211f9581fe4e83a1723af62e6c9628","name":"End"},{"type":"ChoiceInputPrompt","expression_mode":"simple","id":"348e9fe6381d4ee898c860210f2dee8d","name":"Choose repo","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"},"variable_id":"1603be7ec90c466f91942b3163aca78b","message":{"type":"String","mode":"string","value":"gs.getMessage(\"To which HR Service do you want to request access?\")"},"optional":false,"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false}},{"type":"Decision","name":"Did user choose a repository?","branches":[{"type":"Branch","label":"Manual","expression":{"type":"Applicability","mode":"query","value":"choose_repo=enter_manually"},"id":"c77b3fd84fee46689e64993977df55ee","name":"Manual"},{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"choose_repo!=enter_manually"},"id":"5e6e9d32689649f4a7369f01a4cf2101","name":"Yes"}],"id":"51f42ca8cbd845a399c4c202dfabfe2f","goal_id":"8286536658544590a4b2a1aa417fcace"},{"type":"ScriptedAction","script":"(function execute() {\n    /* Example code to trigger an Action that invokes a REST/SOAP integration step\n       to grant current user the access to the requested repository.\n     */\n    /*\n    try {\n\n\t\tvar inputs = {};\n\t\tinputs['user_sys_id'] = vaInputs.user.getValue(); // String \n\t\tinputs['requested_repository'] = vaVars.selectedRepo;\n\n\t\t// Start Asynchronously: Uncomment to run in background. Code snippet will not have access to outputs.\n\t\t// sn_fd.FlowAPI.startAction('global.setup_repository_access', inputs);\n\t\t\t\t\n\t\t// Execute Synchronously: Run in foreground. Code snippet has access to outputs.\n\t\tvar outputs = sn_fd.FlowAPI.executeAction('global.setup_repository_access', inputs);\n\n\t\t// Get Outputs:\n\t\t// Note: outputs can only be retrieved when executing synchronously.\n\t\tvar output = outputs['output']; // String\n\t\tvar error_message = outputs['error_message']; // String\n\t\tvar windows_error_code = outputs['windows_error_code']; // String\n\n\t\tvaVars.status = output ? output.status : false;\n\t\t\n\t} catch (ex) {\n\t\tvar message = ex.getMessage();\n\t\tgs.error(message);\n\t}\n    */\n\n\t// Example for testing purposes\n    vaVars.status = (vaVars.selectedRepo !== 'box') &amp;&amp; (vaVars.selectedRepo !== 'ErrorRepo');\n})()\n","id":"174483340df9444c908d617604130715","name":"Grant access to repository (placeholder)","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Access successful?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return vaVars.status;\n})()\n"},"id":"e048b58475734016a7747f40c72a97a2","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"script","value":"(function execute() {\n    return !vaVars.status;\n})()\n"},"id":"45b83876462246bd9b2389be2827c6ad","name":"No"}],"id":"3755fad8e95b4387abf6f657e5b8e66d","goal_id":"8286536658544590a4b2a1aa417fcace"},{"type":"OutputPrompt","value":{"type":"String","mode":"script","value":"(function execute() {\n    return gs.getMessage(\"I've granted you access to {0}\", vaVars.selectedRepoDisplay);\n})()\n"},"id":"60d8180ed05145cf9e04a59714ab320b","name":"Granted access","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"99b8c8700867449c84a552c7bef13255","message":{"type":"String","mode":"string","value":"gs.getMessage(\"Please enter the full repository name or filepath.\")"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"5209796fff6e4e0a88a346918fc3ab6b","name":"Ask description","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"InputPrompt","variable_id":"accfcac87ab440a8a7e72a297247eadb","message":{"type":"String","mode":"string","value":"gs.getMessage(\"Would you like to open an IT ticket to get further help?\")"},"nlu_entity_binding":{"type":"NLUEntityBinding","allow_text_input":false,"use_confirmation_prompt":false},"optional":false,"id":"a8934d04dc73472cbf67a842273ded60","name":"Open Ticket","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessage(\"Sorry, you cannot access that repository.\")"},"id":"f270baf943ad4b6baabc74aefc5a742b","name":"Access not granted","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"Decision","name":"Ticket needed?","branches":[{"type":"Branch","label":"Yes","expression":{"type":"Applicability","mode":"query","value":"open_ticket=true"},"id":"d4fdacba1748453686db845a1f704a45","name":"Yes"},{"type":"Branch","label":"No","expression":{"type":"Applicability","mode":"query","value":"open_ticket!=true"},"id":"22c04da2f1fa42eb9184962c04501aee","name":"No"}],"id":"4e8d03bb671a49eb9f3ff3a9005ad02d","goal_id":"8286536658544590a4b2a1aa417fcace"},{"type":"OutputPrompt","value":{"type":"String","mode":"string","value":"gs.getMessage(\"Got it. I created your incident and a technician will be assigned to it soon.\")"},"id":"2f3d873dff48474883fe2eeb3f9d1183","name":"Ticket created","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"CRUDAction","mode":"create","query":"caller_id={{vaInputs.user}}^short_description=Need access to: {{vaVars.selectedRepoDisplay}}","variable_id":"c60c83e743644768958b1b08b191341a","id":"8a1facf7d03e4ce398537b21fdea19ef","name":"Create Incident","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}},{"type":"RecordOutputPrompt","mode":"variable","table":"incident","variable_id":"c60c83e743644768958b1b08b191341a","fields":["short_description","category","priority"],"id":"58de7c8c2c894a959f76a77d3bbb8d34","name":"Display Ticket","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"},"condition":{"type":"Condition","mode":"variable","value":""}},{"type":"ScriptedAction","script":"(function execute() {\n    var selectedRepo = vaInputs.choose_repo.getValue();\n    if (selectedRepo !== 'enter_manually') {\n        vaVars.selectedRepo = selectedRepo;\n        vaVars.selectedRepoDisplay = vaInputs.choose_repo.getDisplayValue();\n    } else {\n        vaVars.selectedRepo = vaInputs.ask_description.getValue();\n        vaVars.selectedRepoDisplay = vaVars.selectedRepo;\n    }\n})()\n","id":"7eafccdbd00248cea71258a526285383","name":"Set repository name","goal_id":"8286536658544590a4b2a1aa417fcace","applicability":{"type":"Applicability","mode":"script","value":"true"}}],"edges":[{"type":"Edge","source_node_id":"60d8180ed05145cf9e04a59714ab320b","target_node_id":"d4211f9581fe4e83a1723af62e6c9628","id":"72a574206d994c138131b478bd9e6e78"},{"type":"Edge","source_node_id":"4e8d03bb671a49eb9f3ff3a9005ad02d","target_node_id":"8a1facf7d03e4ce398537b21fdea19ef","branch_id":"d4fdacba1748453686db845a1f704a45","id":"6b7807cbdaff46549e08b6386b9c36c0","name":"d4fdacba1748453686db845a1f704a45"},{"type":"Edge","source_node_id":"5209796fff6e4e0a88a346918fc3ab6b","target_node_id":"7eafccdbd00248cea71258a526285383","id":"a28a4be204114971bc58a3185ba74151"},{"type":"Edge","source_node_id":"b0259fa8291b4dbfbe404cc9a0197eb1","target_node_id":"348e9fe6381d4ee898c860210f2dee8d","id":"74e56f096fb9485485afce884a5de129"},{"type":"Edge","source_node_id":"348e9fe6381d4ee898c860210f2dee8d","target_node_id":"51f42ca8cbd845a399c4c202dfabfe2f","id":"bc3fa5e3f33647459498e8360910c65b"},{"type":"Edge","source_node_id":"174483340df9444c908d617604130715","target_node_id":"3755fad8e95b4387abf6f657e5b8e66d","id":"4f7028184643434fb8de13e71d12d0a9"},{"type":"Edge","source_node_id":"3755fad8e95b4387abf6f657e5b8e66d","target_node_id":"60d8180ed05145cf9e04a59714ab320b","branch_id":"e048b58475734016a7747f40c72a97a2","id":"dd1d277467114eec830df924027db01f","name":"e048b58475734016a7747f40c72a97a2"},{"type":"Edge","source_node_id":"51f42ca8cbd845a399c4c202dfabfe2f","target_node_id":"5209796fff6e4e0a88a346918fc3ab6b","branch_id":"c77b3fd84fee46689e64993977df55ee","id":"6bc924d6fd9345ae8e64602696e4f583","name":"c77b3fd84fee46689e64993977df55ee"},{"type":"Edge","source_node_id":"3755fad8e95b4387abf6f657e5b8e66d","target_node_id":"f270baf943ad4b6baabc74aefc5a742b","branch_id":"45b83876462246bd9b2389be2827c6ad","id":"bf88605625fd49dea639664a70b37fae","name":"45b83876462246bd9b2389be2827c6ad"},{"type":"Edge","source_node_id":"f270baf943ad4b6baabc74aefc5a742b","target_node_id":"a8934d04dc73472cbf67a842273ded60","id":"bfb6ddad75eb4500a33c124ecc9d6574"},{"type":"Edge","source_node_id":"a8934d04dc73472cbf67a842273ded60","target_node_id":"4e8d03bb671a49eb9f3ff3a9005ad02d","id":"05bacc09bc91453c907b5c620879a8cf"},{"type":"Edge","source_node_id":"4e8d03bb671a49eb9f3ff3a9005ad02d","target_node_id":"d4211f9581fe4e83a1723af62e6c9628","branch_id":"22c04da2f1fa42eb9184962c04501aee","id":"b5d6cc72eb5f43f3ae6d2d44e5fbc5b6","name":"22c04da2f1fa42eb9184962c04501aee"},{"type":"Edge","source_node_id":"8a1facf7d03e4ce398537b21fdea19ef","target_node_id":"2f3d873dff48474883fe2eeb3f9d1183","id":"80d7f08af0e04a529ba768e53469a86b"},{"type":"Edge","source_node_id":"2f3d873dff48474883fe2eeb3f9d1183","target_node_id":"58de7c8c2c894a959f76a77d3bbb8d34","id":"40d5e630690f44b799a2147bba34172d"},{"type":"Edge","source_node_id":"58de7c8c2c894a959f76a77d3bbb8d34","target_node_id":"d4211f9581fe4e83a1723af62e6c9628","id":"ef44bcd0aa304fe594e58345359204a2"},{"type":"Edge","source_node_id":"51f42ca8cbd845a399c4c202dfabfe2f","target_node_id":"7eafccdbd00248cea71258a526285383","branch_id":"5e6e9d32689649f4a7369f01a4cf2101","id":"7c7c1c9db61f47368ecd676ec1318c0b","name":"5e6e9d32689649f4a7369f01a4cf2101"},{"type":"Edge","source_node_id":"7eafccdbd00248cea71258a526285383","target_node_id":"174483340df9444c908d617604130715","id":"8edc42762af241b7a45c9574ad65b960"}],"id":"8286536658544590a4b2a1aa417fcace"}],"script_variables":[],"glide_variables":[{"type":"Choice","choices":[{"name":"Onboarding","element":"onboarding"},{"name":"Recruiting","element":"recruiting"},{"name":"Payroll","element":"payroll"},{"name":"Talent","element":"talent"},{"name":"Benefits","element":"benefits"}],"id":"1603be7ec90c466f91942b3163aca78b","name":"choose_repo"},{"type":"String","name":"ask_description","id":"99b8c8700867449c84a552c7bef13255"},{"type":"True/False","id":"accfcac87ab440a8a7e72a297247eadb","name":"open_ticket"},{"type":"Reference","table":"incident","id":"c60c83e743644768958b1b08b191341a","name":"create_incident"}],"applicability":{"type":"Applicability","mode":"script","value":"true"},"roles":[],"scope":"134450a0b3781300787162ac16a8dc1e","id":"f2d52a86db654010b753a0a1159619e1","name":"HR Service Access","key_phrases":["Repository Access","file","repo","repository","drive","access","directory","cloud","provider"],"nlu_provider":"","nlu_model":"global_55ea6d9ddb844010e120a0da4b96192f_Virtual_Agent_Workshop","nlu_intent":"HRServiceAccess","flexible_conversation_switching":false,"design_category":"ccde424173f0330018dd3ae234f6a7bf"}</design_definition>
        <design_topic_id>f2d52a86db654010b753a0a1159619e1</design_topic_id>
        <name>HR Service Access</name>
        <sys_class_name>sys_cb_design_topic</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2019-12-07 17:52:26</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_id>3187a28adb654010b753a0a1159619d2</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>FlowTopic</sys_name>
        <sys_package display_value="Virtual Agent Workshop" source="x_snc_va_lener">55ea6d9ddb844010e120a0da4b96192f</sys_package>
        <sys_policy/>
        <sys_scope display_value="Virtual Agent Workshop">55ea6d9ddb844010e120a0da4b96192f</sys_scope>
        <sys_update_name>sys_cb_design_topic_3187a28adb654010b753a0a1159619d2</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2019-12-07 17:52:33</sys_updated_on>
        <type>FlowTopic</type>
    </sys_cb_design_topic>
</record_update>
